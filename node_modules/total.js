var session = require('cookie-session');

function total(req){
	console.log('*** Caddie - total calculating *** initialize the total price to 0');
	var total_prix = 0;
	if(typeof req.session.caddy == "undefined")
	{
		console.log('*** Caddie - total calculating *** No caddy in session - No calcul to make');
	}
	else
	{
		console.log('*** Caddie - total calculating *** Caddy in session - with items : ' +JSON.stringify(req.session.caddy));
		for(var i=0;i<req.session.caddy.length;i++)
		{
			console.log('*** Caddie - total calculating *** Caddy in session - order : ' +req.session.caddy[i].id+' on product with id '+ req.session.caddy[i].idproduct +' with price ' + req.session.caddy[i].price);
			total_prix = req.session.caddy[i].price + total_prix;
		}
		console.log('*** Caddie - total calculating *** Caddy in session - with total price : ' +total_prix);
	}
	console.log('*** Caddie - total calculating *** return the following total price ' + total_prix);
	return total_prix;
};
exports.total = total();